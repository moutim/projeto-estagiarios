<mat-card class="cardVisible">
  <mat-card-header>
    <p class="tituloCad">Crie Sua FilmControl</p>
    <button mat-icon-button (click)="closeCardLog()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </mat-card-header>

  <form [formGroup]="registerForm">
    <mat-horizontal-stepper [linear]="true" #stepper>
      <mat-step>
        <ng-template matStepLabel>Nome</ng-template>
        <mat-form-field>
          <mat-label>Insira Seu Nome</mat-label>
          <input matInput formControlName="name" placeholder="David" required />
          <mat-error *ngIf="registerForm.get('name')?.errors?.['pattern']">
            Insira apenas letras no nome.
          </mat-error>
          <mat-error *ngIf="registerForm.get('name')?.hasError('required')">
            Nome é obrigatório.
          </mat-error>
        </mat-form-field>

        <div>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>Sobrenome</ng-template>
        <mat-form-field>
          <mat-label>Insira Seu Sobrenome</mat-label>
          <input
            matInput
            formControlName="lastName"
            placeholder="Oliveira De Souza"
            required
          />
          <mat-error *ngIf="registerForm.get('lastName')?.errors?.['pattern']">
            Insira minimo 3 letras no sobrenome.
          </mat-error>
          <mat-error *ngIf="registerForm.get('lastName')?.hasError('required')">
            Sobrenome é obrigatório.
          </mat-error>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>Email Principal</ng-template>
        <mat-form-field>
          <mat-label>Insira Seu Email</mat-label>
          <input
            matInput
            formControlName="email"
            placeholder="DavidJr@example.com"
            email
            required
          />
          <mat-error *ngIf="registerForm.get('email')?.errors?.['email']">
            Deve estar no formato correto
          </mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
            Email é obrigatório.
          </mat-error>
        </mat-form-field>

        <div>
          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>Crie sua senha</ng-template>
        <mat-form-field>
          <mat-label>Insira sua senha</mat-label>
          <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" placeholder="123 or abc" />

          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>

          <mat-error *ngIf="registerForm.get('password')?.errors?.['password']">
            Senha é obrigatória.
          </mat-error>
          <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
            A senha deve ter pelo menos 5 caracteres.
          </mat-error>

        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>Confirme sua senha</ng-template>
        <mat-form-field>
          <mat-label>Insira sua senha novamente</mat-label>
          <input
            matInput
            [type]="hide ? 'password' : 'text'"
            formControlName="confirmPassword"
            placeholder="123 or abc"
          />

          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>

          <mat-error *ngIf="registerForm.get('confirmPassword')?.errors?.['MustMatch']">
            Senha é obrigatória.
          </mat-error>
          <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('minlength')">
            As senhas não correspondem
          </mat-error>

        </mat-form-field>

        <div>
          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button (click)="onSubmit()">Registrar!</button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </form>

  <div class="BtnCadastro">
    <div class="example-button-row2">
      <button mat-flat-button color="primary" (click)="goToLogin()">
        Já tem uma conta? Conecte-se!
      </button>
    </div>
  </div>
</mat-card>
